<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Technical guide to extracting and analyzing Roblox libroblox.so with Ghidra">
    <meta name="author" content="Storbeck">
    <title>Extracting and Analyzing Roblox libroblox.so - Storbeck Blog</title>
</head>
<body>
    <header>
        <nav aria-label="Site navigation">
            <a href="../index.html" rel="home">← Storbeck Blog</a>
        </nav>
    </header>
    
    <main>
        <article>
            <header>
                <h1>Extracting and Analyzing Roblox libroblox.so</h1>
                <p>
                    <time datetime="2025-10-09">Published October 9, 2025</time>
                    <span> • </span>
                    <span>Reverse Engineering</span>
                </p>
            </header>
            
            <p><strong>Step-by-step technical process for extracting Roblox native library and locating purchase prompt functions using Ghidra.</strong></p>
            
            <section>
                <h2>1. Locate APK Files</h2>
                <p>Find Roblox APK files in Sober installation:</p>
                <pre><code>find ~/.var/app/org.vinegarhq.Sober/ -name "*.apk" -exec sh -c 'echo "=== $1 ==="; unzip -l "$1" 2>/dev/null | grep libroblox' _ {} \;</code></pre>
                
                <p>Results:</p>
                <pre><code>=== /home/user/.var/app/org.vinegarhq.Sober/data/sober/assets/base.apk ===
147180128  01-01-1981 01:01   lib/x86_64/libroblox.so

=== /home/user/.var/app/org.vinegarhq.Sober/data/sober/packages/com.roblox.client/split_config.x86_64.apk ===
140479136  01-01-1981 01:01   lib/x86_64/libroblox.so</code></pre>
            </section>

            <section>
                <h2>2. Extract Library</h2>
                <pre><code>unzip -j ~/.var/app/org.vinegarhq.Sober/data/sober/assets/base.apk lib/x86_64/libroblox.so -d /tmp/

# Verify extraction
ls -la /tmp/libroblox.so
# -rw-r--r-- 1 user user 147180128 libroblox.so</code></pre>
            </section>

            <section>
                <h2>3. Ghidra Analysis</h2>
                <ol>
                    <li>Import <code>/tmp/libroblox.so</code> into new Ghidra project</li>
                    <li>Run auto-analysis (default settings)</li>
                    <li>Wait for completion (~10 minutes)</li>
                </ol>
            </section>

            <section>
                <h2>4. String Search Method</h2>
                <p>Search for purchase-related strings in Ghidra:</p>
                <pre><code>Window → Defined Strings
Search: "InsufficientRobux"
Search: "SetPurchasePromptIsShown" 
Search: "PurchasePromptShown"</code></pre>
            </section>

            <section>
                <h2>5. Function Discovery</h2>
                <p>Right-click on string → References → To find usage locations</p>
                
                <p>Key function found at <code>02f35a00</code>:</p>
                <pre><code>void FUN_02f35a00(long param_1, int param_2) {
    if (param_2 != 0) {
        FUN_02f359b0(param_1 + 0x188);  // show_purchase_prompt
        return;
    }
    return;
}</code></pre>
            </section>

            <section>
                <h2>6. Function Identification</h2>
                <p>Rename functions based on analysis:</p>
                <ul>
                    <li><code>FUN_02f35a00</code> → <code>set_purchase_prompt_shown_handler</code></li>
                    <li><code>FUN_02f359b0</code> → <code>show_purchase_prompt</code></li>
                </ul>
                
                <p>Call chain discovered:</p>
                <pre><code>GUI Service → set_purchase_prompt_shown_handler → show_purchase_prompt → Queue System</code></pre>
            </section>


        </article>
    </main>
    
    <aside>
        <section>
            <h2>Tools Required</h2>
            <ul>
                <li>Ghidra (NSA reverse engineering framework)</li>
                <li>unzip command</li>
                <li>Sober/VinegarHQ Roblox client</li>
            </ul>
        </section>
    </aside>
    
    <footer>
        <nav aria-label="Post navigation">
            <a href="../index.html" rel="home">← Back to blog</a>
        </nav>
        <p><small>Last updated: <time datetime="2025-10-09">October 9, 2025</time></small></p>
    </footer>
</body>
</html>
